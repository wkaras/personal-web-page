<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title>Walt Karas's Home Page</title>
	<meta name="generator" content="LibreOffice 6.4.7.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2021-05-17T00:11:32.363457430"/>
	<meta name="Originator" content="Microsoft Word 10"/>
	<meta name="ProgId" content="Word.Document"/>
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<style type="text/css">
		@page { size: 8.5in 11in; margin-left: 0.79in; margin-right: 0.39in; margin-top: 0.39in; margin-bottom: 0.39in }
		p { margin-bottom: 0.1in; background: transparent; color: #000000; line-height: 115%; background: transparent }
		a:link { color: #0000ff; so-language: zxx; text-decoration: underline }
		a:visited { color: #800080; so-language: zxx; text-decoration: underline }
	</style>
</head>
<body lang="en-US" text="#000000" link="#0000ff" vlink="#800080" bgcolor="#ffffff" dir="ltr"><p align="center" style="margin-top: 0.17in; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="6" style="font-size: 28pt"><b>Walt
Karas's Home Page</b></font></font></p>
<p><font face="Liberation Serif, serif">Last update: May 17, 2021</font></p>
<p><a name="_x0000_i1025"></a><font face="Liberation Serif, serif">You
can e-mail me at <b>wkaras dot yahoo dot com</b> .&nbsp; Entiendo
español si prefiere escribirme en español. Please feel free to
re-host any or all of the material on this page if you so desire.&nbsp;
(Do not remove copyright notices.)</font></p>
<p><font face="Liberation Serif, serif">Photos of my late wife Carmen
with Pope John Paul II : <a href="fotos_papa/p1.gif">first</a> <a href="fotos_papa/p2_com.gif">second</a></font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Paintings</font></font></p>
<p><font face="Liberation Serif, serif">Some <a href="pgh/pgh.html">paintings</a>
by my wife's niece, Patricia Galeazzi-Henry.</font></p>
<p><a href="http://www.barryscanlanart.com/">Website</a> with
paintings by my friend from college. 
</p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; font-weight: normal; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">My
Background</font></font></p>
<p><font face="Liberation Serif, serif">I live in Champaign, Illinois
in the United States.&nbsp; I have a Bachelor's degree in Computer
Science and Math from <a href="http://www.emich.edu/compsci/">Eastern
Michigan University</a> (also the alma mater of <a href="http://askjudgemathis.com/">Judge
Greg Mathis</a>).&nbsp; I have 30+ years of experience as a software
developer, mostly in embedded and low-level software.&nbsp; I have
several repositories on <a href="https://github.com/wkaras">github</a>
and two blogs on <a href="https://www.quora.com/profile/Walt-Karas/blogs">Quora</a>
. I am also on <a href="https://www.linkedin.com/in/walter-karas-77b4114">Linkedin</a></font>
<font face="Liberation Serif, serif">. I am on <a href="http://stackoverflow.com/users/2793551/waltk">stackoverflow</a>
and <a href="http://es.stackoverflow.com/users/21164/waltk">stackoverflow
en español</a> .</font></p>
<p><br/>
<br/>

</p>
<p><font size="4" style="font-size: 14pt">C++ Library Bit Fields</font></p>
<p>I have written a bit field facility provided by the header file
bitfield.h ( <a href="https://github.com/wkaras/C-plus-plus-library-bit-fields">https://github.com/wkaras/C-plus-plus-library-bit-fields</a>
). The facility is more portable and flexible than the bit field
facility provided by the base language. Bit field structures can be
laid out from most to least or least to most significant bits, under
programmer control. Bit field structures can be located in device
registers that are not memory mapped. With good compiler
optimization, the performance is comparable.</p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Heap
Memory Manager</font></font></p>
<p><font face="Liberation Serif, serif">A very portable C-language
Heap Memory Manager (Dynamic Memory Allocator).&nbsp; To check it
out, click <a href="heapmm/heapmm.html">here</a>.</font></p>
<p><font face="Liberation Serif, serif">Here is a web site that
describes a interesting algorithm (<a href="http://www.gii.upv.es/tlsf/">TLSF</a>)
for C-style dynamic memory allocation.&nbsp; This algorithm should be
significantly faster than the one I used.&nbsp; Instead of using
best-fit, this algorithm finds a free block whose size is within 2/31
or 2/63 (tunable) of the size of the requested block.&nbsp; Even
best-fit can waste some memory (because there can be free blocks too
small to be useful to the application).&nbsp; Therefore, the
trade-off made by this algorithm may be desirable.&nbsp; The provided
implementation, however, does not seem to me to be that easy to port.</font></p>
<p><font face="Liberation Serif, serif">One important thing I
neglected to mention/realize is that the audit tests can result in a
read of a bad address, which in some environments will cause an
internal interrupt.&nbsp; If you see this, it's not a reason to be
concerned that heapmm won't work in your environment.</font></p>
<p><font face="Liberation Serif, serif">To reduce memory space
overhead, this allocator uses the memory within free blocks to create
a searchable data structure (an AVL tree) of&nbsp; free blocks.&nbsp;
The potential big trade-off with that is it will result in a lot of
memory accesses with terrible locality.&nbsp; That is, a low ratio of
number of memory accesses to number of memory pages containing the
accessed addresses.&nbsp; This could be a significant problem for an
application that uses a large amount of dynamically allocated memory,
and runs in an environment with insufficient physical memory that it
can run without page faults.&nbsp; Lack of locality can also have an
effect even if memory pages are not paged out to and back from
secondary storage.&nbsp; On higher-end Freescale processors, for
example, the Memory Management Unit (MMU) can be useful even if there
is no actual paging of memory.&nbsp; But the MMU uses a large table
in physical memory that&nbsp; defines the mapping of virtual memory
pages to physical memory pages.&nbsp; The MMU is only able to cache a
limitied number of entries in this table.&nbsp; So an access to a
memory page whose translation table entry is not cached will cause
two memory accesses, one to load in the translation entry, followd by
the actual access itself.&nbsp; So this case, bad locality of memory
accesses can have a price even without memory paging.</font></p>
<p><font face="Liberation Serif, serif">Locality of course also
applies to memory caching.&nbsp; But since cache lines are small
(typically 8 to 16 bytes I think),&nbsp; I can’t see a way to
design a general purpose heap memory manager so it’s locality with
respect to memory caching would not be low.</font></p>
<p>This allocator, as is, is obsolete now because it is not
multithread-safe. This could perhaps be used for per-thread memory
polls. If memory was deallocated in a different thread than it was
allocated, it could be put in a linked list associated with the
allocating code. When the allocation function is called in a thread,
it could pop all the blocks that had been put in its associated
linked list, and put them into its memory pool, before doing the
allocation. The head pointers for the free lists would have to be
atomic, and versioned due to the ABA problem. Unfortunately, portable
versioned pointers are not straight-forward: <a href="https://github.com/ywkaras/trafficserver/blob/freelist_upd/include/tscore/ver_ptr.h">ver_ptr.h</a></p>
<p><font face="Liberation Serif, serif">This work is dedicated to the
<a href="http://creativecommons.org/licenses/publicdomain/">Public
Domain</a>&nbsp;. I can provide it under an MIT license, if you need
it.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Memory
Game</font></font></p>
<p><font face="Liberation Serif, serif">To download a zip file
containing my Memory Game program (created with Visual C++ .NET),
click <a href="memgame.zip">here</a>.&nbsp; To view the source code,
click <a href="memgame_cpp.txt">here</a> .</font></p>
<p><font face="Liberation Serif, serif">The executable is in the
public domain.&nbsp; I wrote this program in order to learn Visual
C++ .NET, but it might be of some interest to very young children and
extremely bored people.&nbsp; The borders on the &quot;Play Again&quot;
and &quot;Exit&quot; buttons at the end of the game are not drawn
properly.&nbsp; (If you minimize, then restore the form, the border
on the &quot;Play Again&quot; button changes.)&nbsp; But I think this
has to be Microsoft's bug, not mine.&nbsp; You may also notice that,
when the prompt says you can click &quot;anywhere&quot; to continue,
a click on the text of the prompt is ignored.&nbsp; This is because
the prompt is associated with a Label object.&nbsp; Label is derived
from the Control class, so it receives clicks, even though it does
nothing with them.&nbsp; I decided it wasn't worth the trouble to
display the text directly without using a control, so that a click on
the text would not be ignored.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">AVL
Tree Template</font></font></p>
<p><font face="Liberation Serif, serif">I have written a C++ template
that encodes the AVL Tree algorithms in a very flexible way.&nbsp; To
check it out, click <a href="https://github.com/wkaras/C-plus-plus-intrusive-container-templates">here</a>.&nbsp;
This, plus instrusive singly and doubly linked list and hash table
templates are available (with MIT open source license) <a href="https://github.com/wkaras/C-plus-plus-intrusive-container-templates">here</a>.</font></p>
<p><font face="Liberation Serif, serif">I have also written an
equivalent <a href="gen_c/cavl_tree.html">&quot;generic package&quot;
in straight C</a>.&nbsp; (Or, download a <a href="gen_c/cavl_tree.zip">zip
file</a> with the HTML documentation and source files.)&nbsp; It
would be fairly straightforward to use this generic package to create
a facility in C that would be analogous to the map/set templates in
the C++ Standard Template Library (where items are copied into the
container instead of linked in, and the container allocates memory
from the heap to hold the copies). Used by heap memory manager above
and by <a href="http://faculty.qu.edu.qa/rriley/cmpt507/minix/cavl__if_8h-source.html">Minix</a>
.</font></p>
<p><font face="Liberation Serif, serif">The AVL Tree implementations
are</font> <font face="Liberation Serif, serif">dedicated to the
<a href="http://creativecommons.org/licenses/publicdomain/">Public
Domain</a>. (I can provide it under an MIT license if need be.)</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">CUI
Chess</font></font></p>
<p><font face="Liberation Serif, serif">Here is a chess program that
I wrote for MS-DOS back in the mid 90s:</font></p>
<p><font face="Liberation Serif, serif"><a href="chess.txt">description</a>&nbsp;
<a href="chessexe.zip">zip file with MS-DOS executable</a>&nbsp; <a href="chesssrc.zip">zip
file with MS-DOS source code</a> <a href="https://github.com/wkaras/xterm-CUI-Chess">port
to UNIX xterm</a></font></p>
<p><font face="Liberation Serif, serif">Here is a port to run in a
UNIX xterm: <a href="https://github.com/wkaras/xterm-CUI-Chess">https://github.com/wkaras/xterm-CUI-Chess</a></font></p>
<p><font face="Liberation Serif, serif">This program acts really
stupid in end-games when it has two pieces and the opponent only has
their king.</font></p>
<p><font face="Liberation Serif, serif">I have not managed to beat
the program (with any reasonable look-ahead enabled).&nbsp; But I am
a lousy chess player.&nbsp; For those who have beaten it, I’d love
it if you sent me the move sequence and what command line parameters
you used at startup.&nbsp; Let me know if I can make public the move
sequence and/or your name.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Portable
Spinlock Code in C</font></font></p>
<p><font face="Liberation Serif, serif">Here is the <a href="spinlock_h.txt">header
file</a> and the <a href="spinlock_c.txt">implementation file</a> .&nbsp;
This code is untested, so if you find problems with it, let me know.&nbsp;
Peterson's Algorithm is a simpler, 2-way mutual exclusion algorithm.&nbsp;
<a href="http://research.microsoft.com/users/lamport/pubs/bakery.pdf">Lamport's
Bakery Algorithm</a> , published back in the 70s, is a slightly more
complex n-way mutual exclusion algorithm, which has some useful
properties that my algorithm does not.&nbsp;&nbsp; Unlike mine,
Lamport's&nbsp; algorithm is &quot;fair&quot; in that processors get
the mutex in the order that they requested it.&nbsp; On the other
hand, if the processors are unavoidably contending that much for the
same shared resource, you may be wasting your money paying for
multiple processors.&nbsp; To observe a very minor point, adapting
Lamport's algorithm to handle ticket number wrap-around (due to
precision limits) would I think have to involve giving &quot;cuts&quot;
in the line.&nbsp; (The more fairness matters, the more likely it is
ticket number wrap-around will happen.)&nbsp; I believe that Lamport
found in later investigation that his algorithm works even if
overlapping memory accesses of any single memory location by multiple
processors caused one or both accesses to fail (not just be
arbitrarily ordered).&nbsp; This is&nbsp; not the case with my
algorithm. </font>
</p>
<p><font face="Liberation Serif, serif">WARNING:&nbsp; I think I may
have developed this code and algorithm while I was in the employ of
Alcatel (now part of Nokia), so Nokia could potentially claim it as
its intellectual property.&nbsp; If you want to avoid this issue, and
need a multi-way spinlock, use Lamport’s Algorithm.&nbsp; Another
alternative for a multi-way spinlock is a well-know technique using a
“binary tree” of Peterson 2-way locks, but (like my algorithm) it
lacks the fairness of Lamport’s Algorithm.&nbsp; If anyone really
cares, I could try to get it clarified whether Alcatel-Lucent feels
any burning desire to assert rights over this.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">&quot;Item
List&quot; Programming Technique</font></font></p>
<p><font face="Liberation Serif, serif">Click <a href="itemlist/itemlist.html">here</a>
to see some example code.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Odds
and Ends</font></font></p>
<p><font face="Liberation Serif, serif">This stuff's in the public
domain.</font></p>
<p><font face="Liberation Serif, serif"><a href="hex_to_dec.html">Convert
hex numbers to decimal...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="matrix_mult.html">Matrix
multiplication...</a> </font>
</p>
<p><br/>
<br/>

</p>
<p><font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Delaware
Sucks</font></font></p>
<p><font face="Liberation Serif, serif">Don't go to Delaware if you
can help it: <a href="https://www.facebook.com/ABadVacationInDelaware/about/?tab=page_info">Shakedown
by the Delaware State Police</a> .</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">How
to Store Christmas Lights</font></font></p>
<p><font face="Liberation Serif, serif">Save some sturdy cardboard
tubes, such as those that are left when rolls of wrapping paper are
used up.&nbsp; Wind the lights in a spiral around a tube, without
overlapping, and secure the ends with masking tape.&nbsp; From a
plastic bottle, cut a piece of plastic that will cover the end of the
cardboard tube with lots of overlap.&nbsp; Cut a length of strong
twine that is about twice the length of the cardboard tube.&nbsp;
Make a whole in the center of the piece of plastic that is just big
enough to thread the twine through.&nbsp; Thread one end of the twine
through the hole, then make a knot at the end of twine.&nbsp; The
knot must be too large to pass through the hole in the plastic.&nbsp;
Pass the other end of the twine through the cardboard tube.&nbsp; Tie
a loop in the (unknotted) end of the twine.&nbsp; You can now hang
the tube with the lights in a convenient storage place by putting the
loop over a nail or peg.</font></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Links</font></font></p>
<p><a href="cppvaluetype.png"><font face="Liberation Serif, serif">C++
Value types</font></a></p>
<p><font face="Liberation Serif, serif"><a href="http://www.boost.org/">Boost
C++ Libraries...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://www.codeproject.com/">The
Code Project...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://www.programmersheaven.com/">Programmer's
Heaven...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://wordreference.com/">Translate
between English and other major European languages...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://www.vim.org/">vi
for Windows PCs...</a>&nbsp; Please DON'T e-mail me to tell me about
all the wonderful editors I could use instead.&nbsp; Vi burns out the
good-editor pleasure centers in the brains of its long-term users, so
there is no point in us switching editors now.</font></p>
<p><font face="Liberation Serif, serif">C++ source code <a href="http://www.semdesigns.com/Products/Obfuscators/CppObfuscationExample.html">obfuscator...</a>
(shrouder)</font></p>
<p><font face="Liberation Serif, serif"><a href="http://www.cantrip.org/emptyopt.html">The
&quot;Empty Member&quot; C++ Optimization...</a>&nbsp; (My C++ AVL
tree template now uses this.)</font></p>
<p><a href="https://glamorice.com/"><font face="Liberation Serif, serif">Eyelashes
and other beauty products</font></a></p>
<p><br/>
<br/>

</p>
<p style="font-weight: normal"><font size="4" style="font-size: 14pt">Chambana,
IL Area Links</font></p>
<p><a href="https://www.facebook.com/pages/Average-Joe-Auto-Repair/111079525622415">Average
Joe's Auto Repair</a></p>
<p><a href="https://www.facebook.com/karley.bridgwater/posts/4246543675380271">Hairstylist</a></p>
<p><a href="https://anticachampaign.com/">Pizzeria</a></p>
<p><a href="https://www.chinakingchampaignil.com/">Chinese take-out</a></p>
<p><br/>
<br/>

</p>
<p align="left" style="margin-bottom: 0.08in; page-break-before: auto; page-break-after: avoid">
<font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Raleigh,
NC Area Links</font></font></p>
<p align="left" style="margin-bottom: 0.08in"><a href="https://www.facebook.com/ncdusttoshine/?pnref=story"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Dust
To Shine</font></font></a> <font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">(cleaning
service)</font></font></p>
<p align="left" style="margin-bottom: 0.08in"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><a href="https://www.facebook.com/TheDefinery/?fref=ts">Jordyn
the MUA</a> (make-up artist)</font></font></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.swiftcreekexterminating.com/swiftcreek/default.html"><font face="Liberation Serif, serif">Swift
Creek Exterminating</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://fosterscollision.com/"><font face="Liberation Serif, serif">Foster's
Auto Body</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://triangle.citysearch.com/profile/6193078/raleigh_nc/king_s_wok_chinese_restaurant.html"><font face="Liberation Serif, serif">King's
Wok (Chinese take-out)</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.vicsitalianrestaurant.com/#welcometovics"><font face="Liberation Serif, serif">Vic's
Italian Restaurant and Pizzeria</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.torerosmexicanrestaurants.com/locations/raleigh">Torero's</a>
(Mexican restaurant)</p>
</body>
</html>